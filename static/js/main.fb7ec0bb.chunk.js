(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{19:function(e,t,s){e.exports={content:"Profileinfo_content__21-U1",info:"Profileinfo_info__1_PyM",photo:"Profileinfo_photo__1ho5H",info__text_block:"Profileinfo_info__text_block__3CXUC",info__text_block__name:"Profileinfo_info__text_block__name__38FQb",info__photo:"Profileinfo_info__photo__2T-Xy",edit_button:"Profileinfo_edit_button__GOdO5",contacts:"Profileinfo_contacts__1x4-_",contacts__contact:"Profileinfo_contacts__contact__111Ri"}},20:function(e,t,s){"use strict";t.a=s.p+"static/media/user-img.a70cb991.png"},21:function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var n=s(2),r=s(12),a=s(13),o=s(15),c=s(14),i=s(1),u=s.n(i),l=s(4),p=s(9),d=s(0),j=function(e){return{isAuth:e.auth.isAuth}},b=function(e){var t=function(t){Object(o.a)(i,t);var s=Object(c.a)(i);function i(){return Object(r.a)(this,i),s.apply(this,arguments)}return Object(a.a)(i,[{key:"render",value:function(){return this.props.isAuth?Object(d.jsx)(e,Object(n.a)({},this.props)):Object(d.jsx)(l.a,{to:"/Login"})}}]),i}(u.a.Component);return Object(p.b)(j)(t)}},27:function(e,t,s){e.exports={avatar:"Users_avatar__39OkM",content:"Users_content__1PDYa",mainInfo:"Users_mainInfo__1mr-8",mainInfo__item:"Users_mainInfo__item___kYtB",selectedPage:"Users_selectedPage__2wBA1"}},28:function(e,t,s){e.exports={"pf-title":"Posts_pf-title__2qGp4",pf__newpost_text:"Posts_pf__newpost_text__2Mb-5",pf__sendbut:"Posts_pf__sendbut__12yLU",pf__sendbut__button:"Posts_pf__sendbut__button__3t-Ef"}},32:function(e,t,s){e.exports={Post:"Post_Post__1tj3K",Post__img:"Post_Post__img__1KVgM",Post_text:"Post_Post_text__O81DH"}},33:function(e,t,s){e.exports={item:"Contact_item__1I15y",image:"Contact_image__bGghY",background:"Contact_background__bC5Ow"}},34:function(e,t,s){e.exports={content:"Message_content__1shZM",avatar:"Message_avatar__79mwI",text:"Message_text__1tbDE"}},35:function(e,t,s){e.exports={Content:"Menu_Content__RHax2",Link:"Menu_Link__2qVAI",active:"Menu_active__3P4hx"}},40:function(e,t,s){e.exports={content:"Preloader_content__W4-Ly",img:"Preloader_img__6ruQe"}},41:function(e,t,s){e.exports={header:"Header_header__75_EN",loginBlock:"Header_loginBlock__1SXft"}},42:function(e,t,s){e.exports={content:"Messages_content__1usmH",avatar:"Messages_avatar__3GW4G",sendMessage:"Messages_sendMessage__rHFzY",sendMessageContent:"Messages_sendMessageContent__3GnuF"}},55:function(e,t,s){e.exports={body:"ProfileStatus_body__3gnYz"}},56:function(e,t,s){e.exports={captcha:"Login_captcha__1kvXY"}},57:function(e,t,s){e.exports={body:"ProfileEditMode_body__1z9Vt",cancel_button:"ProfileEditMode_cancel_button__15vw2"}},63:function(e,t,s){},95:function(e,t,s){},96:function(e,t,s){},97:function(e,t,s){"use strict";s.r(t);var n=s(1),r=s.n(n),a=s(31),o=s.n(a),c=(s(63),s(12)),i=s(13),u=s(15),l=s(14),p=s(9),d=s(27),j=s.n(d),b=s(20),f=s(7),h=s(0),g=function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{}),e.users.map((function(t){return Object(h.jsxs)("div",{className:j.a.content,children:[Object(h.jsxs)("div",{className:j.a.mainInfo,children:[Object(h.jsxs)("div",{className:j.a.mainInfo__item,children:[Object(h.jsx)(f.c,{to:"/Profile/".concat(t.id),children:Object(h.jsx)("img",{className:j.a.avatar,src:null!=t.photos.small?t.photos.small:b.a})}),Object(h.jsxs)("button",{disabled:e.isFollowingProgress.some((function(e){return e===t.id})),onClick:function(){e.followAndUnfollow(t.followed,t.id)},children:[" ",t.followed?"Unfollow":"Follow"]})]}),Object(h.jsxs)("div",{className:j.a.mainInfo__item,children:[Object(h.jsx)("span",{children:t.name}),Object(h.jsx)("span",{children:t.status})]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:t.country}),Object(h.jsx)("span",{children:t.city})]})]},t.id)})),Object(h.jsx)("button",{onClick:function(){e.showMoreUsers()},children:"Show more"})]})},O=s.p+"static/media/preloader.3fb26d9b.gif",x=s(40),m=s.n(x),_=function(e){return Object(h.jsx)("div",{className:m.a.content,children:Object(h.jsx)("img",{className:m.a.img,src:O})})},v=s(3),P=s.n(v),k=s(6),w=s(5),y=s(2),C=s(54).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"430c4704-ed52-491c-869b-7f5e70fb9e75"}}),M=function(e,t){return C.get("users?page=".concat(e,"&count=").concat(t))},S=function(e){return C.delete("follow/".concat(e))},U=function(e){return C.post("follow/".concat(e))},A=function(e){return console.warn("use the ProfileAPI.getProfileInfo(id)"),N.getProfileInfo(e)},N={getProfileInfo:function(e){return C.get("profile/".concat(e))},getStatus:function(e){return C.get("profile/status/".concat(e))},updateStatus:function(e){return C.put("profile/status",{status:e})},updatePhoto:function(e){var t=new FormData;return t.append("image",e),C.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},updateProfile:function(e){return C.put("profile",e)}},I={getAuth:function(){return C.get("auth/me")},login:function(e,t,s,n){return C.post("auth/login",{email:e,password:t,rememberMe:s,captcha:n})},logout:function(){return C.delete("auth/login")}},T=function(){return C.get("security/get-captcha-url")},F="followAndUnfollow",D="set_Users",L="set_Current_Page",E="set_Total_Users_Count",z="show_Or_Hide_Loading",J="toggleIsFollowingProgress",q={Users:[],pageSize:10,totalUsersCount:0,currentPage:1,loading:!1,isFollowingProgress:[]},H=function(e,t){return{type:F,userId:e,followed:t}},B=function(e){return{type:L,currentPage:e}},R=function(e){return{type:z,meaning:e}},G=function(e,t){return{type:J,progressMeaning:e,userId:t}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(y.a)(Object(y.a)({},e),{},{Users:e.Users.map((function(e){return e.id===t.userId?Object(y.a)(Object(y.a)({},e),{},{followed:t.followed}):e}))});case D:return Object(y.a)(Object(y.a)({},e),{},{Users:[].concat(Object(w.a)(e.Users),Object(w.a)(t.users))});case L:return Object(y.a)(Object(y.a)({},e),{},{currentPage:t.currentPage});case E:return Object(y.a)(Object(y.a)({},e),{},{totalUsersCount:t.totalUsersCount});case z:return Object(y.a)(Object(y.a)({},e),{},{loading:t.meaning});case J:return Object(y.a)(Object(y.a)({},e),{},{isFollowingProgress:t.progressMeaning?[].concat(Object(w.a)(e.isFollowingProgress),[t.userId]):Object(w.a)(e.isFollowingProgress.filter((function(e){return e!=t.userId})))});default:return e}},Y=s(16),X=s(21),K=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(){var e;Object(c.a)(this,s);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).showMoreUsers=function(){e.props.getUsersTC(e.props.currentPage,e.props.pageSize)},e}return Object(i.a)(s,[{key:"componentDidMount",value:function(){this.props.isAuth&&this.props.getUsersTC(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g,{showMoreUsers:this.showMoreUsers,users:this.props.users,followAndUnfollow:this.props.followAndUnfollowTC,isFollowingProgress:this.props.isFollowingProgress}),this.props.loading?Object(h.jsx)(_,{}):null]})}}]),s}(r.a.Component),Z={followAndUnfollow:H,setIsFollowingProgress:G,getUsersTC:function(e,t){return function(){var s=Object(k.a)(P.a.mark((function s(n){var r;return P.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n(R(!0)),s.prev=1,s.next=4,M(e,t);case 4:r=s.sent,n(R(!1)),n((o=r.data.items,{type:D,users:o})),n((a=r.data.totalCount,{type:E,totalUsersCount:a})),n(B(e+1)),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(1),alert("server error");case 14:case"end":return s.stop()}var a,o}),s,null,[[1,11]])})));return function(e){return s.apply(this,arguments)}}()},followAndUnfollowTC:function(e,t){return e?function(){var s=Object(k.a)(P.a.mark((function s(n){return P.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n(G(!0,t)),s.prev=1,s.next=4,S(t);case 4:0===s.sent.data.resultCode&&n(H(t,!e)),n(G(!1,t)),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(1),alert("server error");case 12:case"end":return s.stop()}}),s,null,[[1,9]])})));return function(e){return s.apply(this,arguments)}}():function(){var s=Object(k.a)(P.a.mark((function s(n){return P.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n(G(!0,t)),s.prev=1,s.next=4,U(t);case 4:0===s.sent.data.resultCode&&n(H(t,!e)),n(G(!1,t)),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(1),alert("server error");case 12:case"end":return s.stop()}}),s,null,[[1,9]])})));return function(e){return s.apply(this,arguments)}}()}},Q=Object(Y.c)(Object(p.b)((function(e){return{isAuth:e.auth.isAuth,users:e.UsersPage.Users,pageSize:e.UsersPage.pageSize,totalUsersCount:e.UsersPage.totalUsersCount,currentPage:e.UsersPage.currentPage,loading:e.UsersPage.loading,isFollowingProgress:e.UsersPage.isFollowingProgress}}),Z),X.a)(K),W=(s(95),s(28)),$=s.n(W),ee=s(32),te=s.n(ee),se=function(e){return Object(h.jsxs)("div",{className:te.a.Post,children:[Object(h.jsx)("img",{className:te.a.Post__img,src:e.img?e.img:b.a}),Object(h.jsx)("span",{className:te.a.Post_text,children:e.text}),Object(h.jsxs)("span",{children:["Likes ",e.likes]})]})},ne=function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)("h4",{className:$.a.pf_title,children:"My posts"}),Object(h.jsx)("textarea",{className:$.a.pf__newpost_text,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u0442\u0430",value:e.PostText,onChange:function(t){e.postText(t.target.value)}}),Object(h.jsx)("div",{className:$.a.pf__sendbut,children:Object(h.jsx)("button",{className:$.a.pf__sendbut__button,onClick:function(){e.addPost()},children:"Send"})}),Object(h.jsx)("div",{className:$.a.posts,children:e.Posts.map((function(t){return Object(h.jsx)(se,{text:t.message,likes:t.likes,img:e.img},t.id)}))})]})},re="post_Text",ae="add_Post",oe="Set_Users_Profile",ce="Get_Status",ie="Update_Status",ue="Update_Photo",le="Is_Saving_Progress",pe={Posts:[{id:"1",message:"Hi",likes:"0"},{id:"2",message:"somebody is here?",likes:"2"},{id:"3",message:"why everyone don't like me?",likes:"0"},{id:"4",message:"uhh...",likes:"0"},{id:"5",message:"...",likes:"0"},{id:"6",message:"...",likes:"10"}],PostText:"",profile:null,status:"",isSavingProgress:!1},de=function(e){return{type:oe,profile:e}},je=function(e){return{type:ce,status:e}},be=function(e){return{type:ie,status:e}},fe=function(e){return function(){var t=Object(k.a)(P.a.mark((function t(s){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A(e);case 3:n=t.sent,s(de(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert("server error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(y.a)(Object(y.a)({},e),{},{Posts:[].concat(Object(w.a)(e.Posts),[{id:"1",message:e.PostText,likes:"0"}]),PostText:""});case re:return Object(y.a)(Object(y.a)({},e),{},{PostText:t.text});case oe:return Object(y.a)(Object(y.a)({},e),{},{profile:t.profile});case ce:case ie:return Object(y.a)(Object(y.a)({},e),{},{status:t.status});case ue:return Object(y.a)(Object(y.a)({},e),{},{profile:Object(y.a)(Object(y.a)({},e.profile),{},{photos:t.photos})});case le:return Object(y.a)(Object(y.a)({},e),{},{isSavingProgress:t.isSavingProgress});default:return e}},ge={addPost:function(){return{type:ae}},postText:function(e){return{type:re,text:e}}},Oe=Object(p.b)((function(e){return{Posts:e.profilePage.Posts,PostText:e.profilePage.PostText,avatar:e.profilePage.profile.photos.small}}),ge)(ne),xe=s(19),me=s.n(xe),_e=(r.a.Component,s(10)),ve=s(55),Pe=s.n(ve),ke=s(26),we=function(e){var t=Object(ke.a)({mode:"all"}),s=t.register,r=t.formState.errors,a=t.reset,o=Object(n.useState)(!1),c=Object(_e.a)(o,2),i=c[0],u=c[1],l=Object(n.useState)(e.status),p=Object(_e.a)(l,2),d=p[0],j=p[1];Object(n.useEffect)((function(){j(e.status)}),[e.status]);var b=function(){u(!i)};return Object(h.jsx)("form",{className:Pe.a.body,children:i?Object(h.jsxs)("div",{children:[Object(h.jsx)("input",Object(y.a)(Object(y.a)({},s("editStatus",{required:{},maxLength:{value:300,message:"The maximum length of the status is 300 symbols"}})),{},{type:"text",onBlur:function(t){r.editStatus||(j(t.target.value),e.updateStatus(t.target.value)),a(),b()},autoFocus:!0,defaultValue:d})),r.editStatus&&Object(h.jsx)("div",{style:{color:"red"},children:r.editStatus.message})]}):Object(h.jsx)("div",{children:Object(h.jsxs)("span",{onClick:e.isOwner&&b,children:[" ",d||"Status"]})})})},ye=s.p+"static/media/github.1af25680.png",Ce=s.p+"static/media/vk.06a004ee.png",Me=s.p+"static/media/facebook.8541c505.png",Se=s.p+"static/media/instagram.84425e4d.png",Ue=s.p+"static/media/twitter.d9cefac3.png",Ae=s.p+"static/media/website.a967f4ed.png",Ne=s.p+"static/media/youtube.4ef6f40f.png",Ie=s.p+"static/media/mainLink.9a50b750.png",Te=s(33),Fe=s.n(Te),De=function(e){return Object(h.jsx)("div",{children:e.contact?Object(h.jsx)("div",{className:Fe.a.item,children:Object(h.jsx)("a",{className:Fe.a.background,href:e.contact,children:Object(h.jsx)("img",{className:Fe.a.image,src:e.image})})}):null})},Le=function(e,t){return Object(h.jsx)("div",{className:me.a.contacts__contact,children:Object(h.jsx)(De,{contact:e,image:t})})},Ee=function(e){if(!e.profile)return Object(h.jsx)(_,{});return Object(h.jsxs)("div",{className:me.a.content,children:[Object(h.jsxs)("div",{className:me.a.info,children:[Object(h.jsxs)("div",{className:me.a.info__photo,children:[Object(h.jsx)("img",{className:me.a.photo,src:e.profile.photos.large?e.profile.photos.large:b.a}),e.isOwner&&Object(h.jsx)(f.c,{className:me.a.edit_button,to:"/Edit",children:"Edit"})]}),Object(h.jsxs)("div",{className:me.a.info__text_block,children:[e.profile.fullName?Object(h.jsx)("span",{className:me.a.info__text_block__name,children:e.profile.fullName}):"Name",Object(h.jsx)(we,{isOwner:e.isOwner,status:e.status,updateStatus:e.updateStatus}),e.profile.aboutMe?Object(h.jsxs)("span",{children:["About me: ",e.profile.aboutMe]}):null,e.profile.lookingForAJob?Object(h.jsx)("span",{children:"looking for a job"}):Object(h.jsx)("span",{children:"not looking for a job"}),e.profile.lookingForAJobDescription?Object(h.jsxs)("span",{children:["Skills: ",e.profile.lookingForAJobDescription]}):null,Object(h.jsx)("span",{children:"Contacts:"}),Object(h.jsxs)("div",{className:me.a.contacts,children:[Le(e.profile.contacts.github,ye),Le(e.profile.contacts.vk,Ce),Le(e.profile.contacts.facebook,Me),Le(e.profile.contacts.instagram,Se),Le(e.profile.contacts.twitter,Ue),Le(e.profile.contacts.website,Ae),Le(e.profile.contacts.youtube,Ne),Le(e.profile.contacts.mainLink,Ie)]})]})]}),Object(h.jsx)("div",{children:e.isOwner&&Object(h.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&e.updatePhoto(t.target.files[0])}})})]})},ze=function(e){return e.profile?Object(h.jsxs)("div",{children:[Object(h.jsx)(Ee,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,updatePhoto:e.updatePhoto}),Object(h.jsx)(Oe,{img:e.profile.photos.small})]}):Object(h.jsx)(_,{})},Je=s(4),qe=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.router.params.userId;e||(e=this.props.userId),this.props.getProfileInfoTC(e),this.props.getProfileStatusTC(e)}},{key:"componentDidUpdate",value:function(e,t,s){if(this.props.router.params.userId!==e.router.params.userId){var n=this.props.router.params.userId;n||(n=this.props.userId),this.props.getProfileInfoTC(n),this.props.getProfileStatusTC(n)}}},{key:"render",value:function(){return Object(h.jsx)("div",{children:Object(h.jsx)(ze,{isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateProfileStatusTC,updatePhoto:this.props.updateProfilePhotoTC})})}}]),s}(r.a.Component),He={setUserProfile:de,getProfileInfoTC:fe,getProfileStatusTC:function(e){return function(){var t=Object(k.a)(P.a.mark((function t(s){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.getStatus(e);case 3:n=t.sent,s(je(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert("server error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updateProfileStatusTC:function(e){return function(){var t=Object(k.a)(P.a.mark((function t(s){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.updateStatus(e);case 3:0===t.sent.data.resultCode&&s(be(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert("server error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updateProfilePhotoTC:function(e){return function(){var t=Object(k.a)(P.a.mark((function t(s){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.updatePhoto(e);case 3:0===(n=t.sent).data.resultCode&&s((r=n.data.data.photos,{type:ue,photos:r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert("server error");case 10:case"end":return t.stop()}var r}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}};var Be=Object(Y.c)(Object(p.b)((function(e){return{userId:e.auth.userId,profile:e.profilePage.profile,status:e.profilePage.status}}),He),(function(e){return function(t){var s=Object(Je.f)(),n=Object(Je.g)(),r=Object(Je.h)();return Object(h.jsx)(e,Object(y.a)(Object(y.a)({},t),{},{router:{location:s,navigate:n,params:r}}))}}),X.a)(qe),Re=s(41),Ge=s.n(Re),Ve=s.p+"static/media/Logo.74885617.png",Ye=function(e){return Object(h.jsxs)("header",{className:Ge.a.header,children:[Object(h.jsx)("img",{src:Ve}),Object(h.jsxs)("div",{className:Ge.a.loginBlock,children:[e.isAuth?e.login:Object(h.jsx)(f.c,{to:"/login",children:"Login"}),e.isAuth?Object(h.jsx)("button",{onClick:e.logout,children:"Log out"}):""]})]})},Xe="set_User_Data",Ke="set_Captcha_Url",Ze={userId:null,email:null,login:null,isAuth:!1,loading:!1,captchaUrl:null},Qe=function(e,t,s,n){return{type:Xe,userId:e,email:t,login:s,isAuth:n}},We=function(e){return{type:Ke,url:e}},$e=function(){return function(){var e=Object(k.a)(P.a.mark((function e(t){var s,n,r,a,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,console.warn("use the AuthApi.getAuth()"),I.getAuth();case 3:0===(s=e.sent).data.resultCode&&(n=s.data.data,r=n.id,a=n.email,o=n.login,t(Qe(r,a,o,!0))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("server error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xe:return Object(y.a)(Object(y.a)({},e),{},{userId:t.userId,email:t.email,login:t.login,isAuth:t.isAuth});case Ke:return Object(y.a)(Object(y.a)({},e),{},{captchaUrl:t.url});default:return e}},tt=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return Object(h.jsx)(Ye,{isAuth:this.props.isAuth,login:this.props.login,logout:this.props.logout})}}]),s}(r.a.Component),st={setAuthUserData:Qe,getAuthTC:$e,logout:function(){return function(){var e=Object(k.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.logout();case 3:0===e.sent.data.resultCode&&t(Qe(null,null,null,!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("server error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}},nt=Object(p.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),st)(tt),rt=s(56),at=s.n(rt),ot=function(e){var t=Object(ke.a)({mode:"all"}),s=t.register,n=t.handleSubmit,r=t.setError,a=t.clearErrors,o=t.formState.errors,c=t.reset;return e.isAuth?Object(h.jsx)(Je.a,{to:"/Profile"}):Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Login"}),Object(h.jsxs)("form",{onSubmit:n((function(t){e.login(t.email,t.password,t.rememberMe,t.captcha,r),c()})),children:[Object(h.jsx)("div",{children:Object(h.jsx)("input",Object(y.a)(Object(y.a)({},s("email",{required:"required filed",pattern:{value:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"Pleace enter the valid email"}})),{},{onFocus:function(){a()},placeholder:"Email",type:"text"}))}),o.email&&Object(h.jsx)("div",{style:{color:"red"},children:o.email.message}),Object(h.jsx)("div",{children:Object(h.jsx)("input",Object(y.a)(Object(y.a)({},s("password",{required:"required filed"})),{},{onFocus:function(){a()},placeholder:"Password",type:"password"}))}),o.password&&Object(h.jsx)("div",{style:{color:"red"},children:o.password.message}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",Object(y.a)(Object(y.a)({},s("rememberMe")),{},{type:"checkbox"}))," remember me"]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{children:"Login"})}),e.captchaUrl&&Object(h.jsxs)("div",{className:at.a.captcha,children:[Object(h.jsx)("img",{src:e.captchaUrl}),Object(h.jsx)("input",Object(y.a)(Object(y.a)({},s("captcha")),{},{placeholder:"Captcha",type:"text"}))]}),o.server&&Object(h.jsx)("div",{style:{color:"red"},children:o.server.message})]})]})},ct={login:function(e,t,s,n,r){return function(){var a=Object(k.a)(P.a.mark((function a(o){var c,i;return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,I.login(e,t,s,n);case 3:c=a.sent,a.t0=c.data.resultCode,a.next=0===a.t0?7:10===a.t0?10:16;break;case 7:return null!=n&&o(We(null)),o($e()),a.abrupt("break",17);case 10:return a.next=12,T();case 12:return i=a.sent,o(We(i.data.url)),r("captcha",{message:i.data.messages}),a.abrupt("break",17);case 16:r("server",{message:c.data.messages});case 17:a.next=22;break;case 19:a.prev=19,a.t1=a.catch(0),alert("server error");case 22:case"end":return a.stop()}}),a,null,[[0,19]])})));return function(e){return a.apply(this,arguments)}}()}},it=Object(p.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),ct)(ot),ut=s(34),lt=s.n(ut),pt=function(e){return Object(h.jsxs)("div",{className:lt.a.content,children:[Object(h.jsx)("img",{className:lt.a.avatar,src:"https://e7.pngegg.com/pngimages/744/742/png-clipart-dog-breed-wolfdog-illustration-exquisite-hand-painted-dogs-avatar-watercolor-painting-heroes.png"}),Object(h.jsx)("span",{className:lt.a.text,children:e.message})]})},dt="Send_Message",jt="Message_Text",bt={Messages:[{id:"1",message:"Hi"},{id:"2",message:"How are you?"}],MessageText:""},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dt:var s=e.MessageText.trim();return s.length?Object(y.a)(Object(y.a)({},e),{},{Messages:[].concat(Object(w.a)(e.Messages),[{id:"1",message:e.MessageText}]),MessageText:""}):Object(y.a)({},e);case jt:return Object(y.a)(Object(y.a)({},e),{},{MessageText:t.text});default:return e}},ht=s(42),gt=s.n(ht),Ot=function(e){e.Messages.map((function(e){return Object(h.jsx)(pt,{message:e.message},e.id)}));return Object(h.jsxs)("div",{children:[e.Messages.map((function(e){return Object(h.jsx)(pt,{message:e.message},e.id)})),Object(h.jsxs)("div",{className:gt.a.sendMessageContent,children:[Object(h.jsx)("textarea",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",value:e.MessageText,onChange:function(t){e.MessageTextChange(t.target.value)}}),Object(h.jsx)("button",{onClick:function(){e.SendMessage()},class:gt.a.sendMessage,children:"Send"})]})]})},xt={SendMessage:function(){return{type:dt}},MessageTextChange:function(e){return{type:jt,text:e}}},mt=Object(p.b)((function(e){return{Messages:e.MessagesPage.Messages,MessageText:e.MessagesPage.MessageText}}),xt)(Ot),_t="set_initialized",vt={initialized:!1},Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;return t.type===_t?Object(y.a)(Object(y.a)({},e),{},{initialized:!0}):e},kt=(s(96),s(35)),wt=s.n(kt),yt=function(){var e=function(e){var t=e.isActive;return t?wt.a.active:wt.a.Link};return Object(h.jsxs)("nav",{className:wt.a.Content,children:[Object(h.jsx)("div",{children:Object(h.jsx)(f.c,{className:e,to:"/Profile",children:"Profile"})}),Object(h.jsx)("div",{children:Object(h.jsx)(f.c,{className:e,to:"/Dialogs",children:"Messages"})}),Object(h.jsx)("div",{children:Object(h.jsx)(f.c,{className:e,to:"/Users",children:"Users"})})]})},Ct=s(57),Mt=s.n(Ct),St=function(e,t,s,n){return Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:n}),Object(h.jsx)("input",Object(y.a)(Object(y.a)({},e(n,{pattern:{value:/((?:(?:http?|ftp)[s]*:\/\/)?[a-z0-9-%\/\&=?\.]+\.[a-z]{2,4}\/?([^\s<>\#%"\,\{\}\\|\\\^\[\]`]+)?)/gi,message:"Invalid URL"}})),{},{placeholder:"",type:"text"})),t[n]&&Object(h.jsx)("div",{style:{color:"red"},children:t[n].message})]})},Ut=function(e){var t=Object(ke.a)({mode:"all",defaultValues:{aboutMe:e.profile.aboutMe,lookingForAJob:e.profile.lookingForAJob,lookingForAJobDescription:e.profile.lookingForAJobDescription,fullName:e.profile.fullName,github:e.profile.contacts.github,vk:e.profile.contacts.vk,facebook:e.profile.contacts.facebook,instagram:e.profile.contacts.instagram,twitter:e.profile.contacts.twitter,website:e.profile.contacts.website,youtube:e.profile.contacts.youtube,mainLink:e.profile.contacts.mainLink}}),s=t.handleSubmit,n=t.register,r=t.formState.errors,a=t.clearErrors,o=t.setError,c=(t.setValue,function(){var t=Object(k.a)(P.a.mark((function t(s){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.save({AboutMe:s.aboutMe,contacts:{github:s.github,vk:s.vk,facebook:s.facebook,instagram:s.instagram,twitter:s.twitter,website:s.website,youtube:s.youtube,mainLink:s.mainLink},lookingForAJob:s.lookingForAJob,lookingForAJobDescription:s.lookingForAJobDescription,fullName:s.fullName,userId:e.userId},o);case 2:window.location.href="Profile";case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Edit mode"}),Object(h.jsxs)("form",{onSubmit:s(c),children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:"Full name"}),Object(h.jsx)("input",Object(y.a)(Object(y.a)({},n("fullName",{required:"Required field"})),{},{placeholder:"",type:"text"})),r.fullName&&Object(h.jsx)("div",{style:{color:"red"},children:r.fullName.message})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:"About me"}),Object(h.jsx)("input",Object(y.a)(Object(y.a)({},n("aboutMe",{required:"Required field"})),{},{placeholder:"",type:"text"})),r.aboutMe&&Object(h.jsx)("div",{style:{color:"red"},children:r.aboutMe.message})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",Object(y.a)(Object(y.a)({},n("lookingForAJob")),{},{placeholder:"",type:"checkbox"})),Object(h.jsx)("span",{children:"Looking for a job"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:"Skills"}),Object(h.jsx)("input",Object(y.a)(Object(y.a)({},n("lookingForAJobDescription",{required:"Required field"})),{},{placeholder:"",type:"text"})),r.lookingForAJobDescription&&Object(h.jsx)("div",{style:{color:"red"},children:r.lookingForAJobDescription.message})]}),Object(h.jsx)("h3",{children:"Contacts: "}),St(n,r,a,"facebook"),St(n,r,a,"github"),St(n,r,a,"instagram"),St(n,r,a,"mainLink"),St(n,r,a,"twitter"),St(n,r,a,"vk"),St(n,r,a,"website"),St(n,r,a,"youtube"),Object(h.jsx)("button",{disabled:e.isSavingProgress,children:"Save"}),Object(h.jsx)(f.c,{className:Mt.a.cancel_button,to:e.isSavingProgress?"":"/Profile",children:"Cancel"})]})]})},At=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"componentDidMount",value:function(){this.props.getProfileInfoTC(this.props.userId)}},{key:"render",value:function(){return Object(h.jsx)("div",{children:this.props.profile?Object(h.jsx)(Ut,{userId:this.props.userId,profile:this.props.profile,save:this.props.updateProfileTC,isSavingProgress:this.props.isSavingProgress}):Object(h.jsx)(_,{})})}}]),s}(r.a.Component),Nt={updateProfileTC:function(e){return function(){var t=Object(k.a)(P.a.mark((function t(s){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:le,isSavingProgress:!0}),t.prev=1,t.next=4,N.updateProfile(e);case 4:0===t.sent.data.resultCode&&alert("update status error"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),alert("server error");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getProfileInfoTC:fe},It=Object(Y.c)(Object(p.b)((function(e){return{userId:e.auth.userId,profile:e.profilePage.profile,isSavingProgress:e.profilePage.isSavingProgress}}),Nt),X.a)(At),Tt=r.a.lazy((function(){return s.e(3).then(s.bind(null,101))})),Ft=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(h.jsx)(f.a,{children:Object(h.jsx)("div",{className:"app-wrapper",children:Object(h.jsxs)("div",{className:"app-body",children:[Object(h.jsx)(nt,{}),Object(h.jsx)(yt,{}),Object(h.jsxs)(Je.d,{children:[Object(h.jsx)(Je.b,{path:"Edit",element:Object(h.jsx)(It,{})}),Object(h.jsx)(Je.b,{path:"",element:Object(h.jsx)(Je.a,{to:"Profile"})}),Object(h.jsx)(Je.b,{path:"/Dialogs/",element:Object(h.jsx)(r.a.Suspense,{fallback:Object(h.jsx)(_,{}),children:Object(h.jsx)(Tt,{})})}),Object(h.jsx)(Je.b,{path:"Dialogs/*",element:Object(h.jsx)(mt,{})}),Object(h.jsx)(Je.b,{path:"Profile/:userId",element:Object(h.jsx)(Be,{})}),Object(h.jsx)(Je.b,{path:"Profile/",element:Object(h.jsx)(Be,{})}),Object(h.jsx)(Je.b,{path:"Users",element:Object(h.jsx)(Q,{})}),Object(h.jsx)(Je.b,{path:"Login",element:Object(h.jsx)(it,{})}),Object(h.jsx)(Je.b,{path:"*",element:"Not found"})]})]})})}):Object(h.jsx)(_,{})}}]),s}(r.a.Component),Dt=Object(Y.c)(Object(p.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){try{e($e()).then((function(){e({type:_t})}))}catch(t){alert("server error")}}}}))(Ft),Lt=function(e){e&&e instanceof Function&&s.e(4).then(s.bind(null,100)).then((function(t){var s=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;s(e),n(e),r(e),a(e),o(e)}))},Et={Dialogs:[{id:"1",name:"Dmitry"},{id:"2",name:"Sasha"},{id:"3",name:"Timofey"}]},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0,s=Object(y.a)({},e);return t.type,s},Jt=s(58),qt=Object(Y.b)({profilePage:he,MessagesPage:ft,DialogsPage:zt,UsersPage:V,auth:et,app:Pt}),Ht=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Y.c,Bt=Object(Y.d)(qt,Ht(Object(Y.a)(Jt.a)));o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(p.a,{store:Bt,children:Object(h.jsx)(Dt,{})})}),document.getElementById("root")),Lt()}},[[97,1,2]]]);
//# sourceMappingURL=main.fb7ec0bb.chunk.js.map